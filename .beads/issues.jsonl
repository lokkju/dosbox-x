{"id":"DBX-3da","title":"Rename C_GDBSERVER to C_REMOTEDEBUG","description":"Rename the build flag from C_GDBSERVER to C_REMOTEDEBUG to better reflect that it covers both GDB remote debugging and QMP keyboard input protocols.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-16T22:32:20.413564306-08:00","updated_at":"2025-12-16T22:41:32.354244916-08:00","closed_at":"2025-12-16T22:41:32.354244916-08:00","close_reason":"Renamed C_GDBSERVER to C_REMOTEDEBUG across all files","dependencies":[{"issue_id":"DBX-3da","depends_on_id":"DBX-mbt","type":"blocks","created_at":"2025-12-16T22:32:20.414630321-08:00","created_by":"daemon"}]}
{"id":"DBX-mbt","title":"Implement QMP-compatible keyboard input protocol","description":"Add a QEMU QMP-compatible protocol for keyboard input injection, separate from the GDB stub. This allows use of existing QEMU tooling and provides a cleaner separation of concerns.\n\nKey components:\n- JSON-based protocol on separate socket\n- send-key command with hold-time support\n- input-send-event for explicit press/release control\n- QKeyCode-compatible key names mapped to DOSBox KBD_KEYS","design":"## Protocol Design\n\nUse QEMU's QMP subset:\n- `send-key`: Array of keys pressed simultaneously, auto-release after hold-time\n- `input-send-event`: Explicit key down/up events\n\n## Key Name Mapping\n\nMap QEMU QKeyCode names to DOSBox KBD_KEYS enum values via static lookup table.\n\n## Implementation Plan\n\n1. Create `include/qmp.h` - QMPServer class declaration\n2. Create `src/debug/qmp.cpp` - QMP server implementation\n   - Socket handling (reuse pattern from gdbserver)\n   - JSON parsing (minimal, just what we need)\n   - Key mapping table\n   - send-key command\n   - input-send-event command\n3. Update `src/debug/Makefile.am` - add qmp.cpp\n4. Update `configure.ac` - gate behind C_QMPSERVER or reuse C_GDBSERVER\n5. Update `src/dosbox.cpp` - add qmp config options\n6. Update `src/debug/debug.cpp` - startup/shutdown\n7. Update docs/GDBSERVER.md or create docs/QMP.md","notes":"Implementation complete. QMP server with send-key and input-send-event commands. Renamed C_GDBSERVER to C_REMOTEDEBUG. Documentation updated.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T22:23:09.068905908-08:00","updated_at":"2025-12-16T22:43:39.476902161-08:00","closed_at":"2025-12-16T22:43:39.476902161-08:00","close_reason":"QMP keyboard input protocol implemented and documented"}
